<script type="text/javascript" src="++resource++jquery-ui-sortable.js"></script>
<script type="text/javascript">
// wrap this so it runs after page load
jq(function() {
    // show/hide spinner on jquery AJAX events
    jq("#kss-spinner").ajaxStart(function(){
        jq(this).show();
    });
    jq("#kss-spinner").ajaxStop(function(){
        jq(this).hide();
    });

    //remove things that do not need to be there when javascript is working.
    jq(".schemaeditor-field-mover").html("");
    jq(".schemaeditor-field-mover").children().remove();
    //jq("span.option").remove(); 
    //jq("input.button-field").remove();

    jq("a.schemaeditor-field-options-link").click(function(){
    	//do ajax magic here
    });

    jq(".schemaeditor-delete-field a").click(function(){
    	//ajax call to delete fields
    	
    	return false;
    });

    //this is ridiculously easy!
    jq("#schemaeditor-fields").sortable({
        axis: 'y',
        placeholder: 'schemaeditor-field',
    	update: function(event, ui){
    		var field = jq('.schemaeditor-field-id', ui.item).val();
    		var pos = jq('.schemaeditor-field').index(ui.item);
            jq.ajax({
              type: "POST",
              url: location.href + '/' + field + '/@@order',
              data: { 'pos': pos },
              // XXX make this nicer
              error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert( 'Error: ' + textStatus );
              }
            });
    	}
    });
});
</script>
